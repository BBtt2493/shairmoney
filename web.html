<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>‡∏´‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</title>
  <style>
    body { font-family: sans-serif; max-width: 700px; margin: auto; padding: 20px; }
    input, button { padding: 6px; margin: 5px 0; }
    .entry { border: 1px solid #ccc; padding: 10px; margin: 10px 0; border-radius: 8px; position: relative; }
    .result, .person-list { margin-top: 10px; padding: 10px; background: #f0f0f0; border-radius: 5px; }
    .remove-btn { position: absolute; top: 10px; right: 10px; }
  </style>
</head>
<body>

  <h2>‡∏´‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</h2>

  <div id="entriesContainer"></div>

  <button onclick="addEntry()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
  <button onclick="calculateAll()">üßÆ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</button>

  <script>
    function addEntry() {
      const container = document.getElementById("entriesContainer");

      const wrapper = document.createElement("div");

      const entryDiv = document.createElement("div");
      entryDiv.className = "entry";

      const resultDiv = document.createElement("div");
      resultDiv.className = "result";

      entryDiv.innerHTML = `
        <button class="remove-btn">‚ùå</button>
        <label>‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£: <input type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ï‡∏±‡πã‡∏ß‡∏´‡∏ô‡∏±‡∏á" class="item-name" /></label><br/>
        <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏ß‡∏°: <input type="number" placeholder="‡πÄ‡∏ä‡πà‡∏ô 600" class="item-amount" /></label><br/>
        <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô: <input type="number" placeholder="‡πÄ‡∏ä‡πà‡∏ô 5" class="item-people" /></label>
      `;

      // ‡∏•‡∏ö‡∏ó‡∏±‡πâ‡∏á input ‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ
      entryDiv.querySelector(".remove-btn").addEventListener("click", () => {
        wrapper.remove();
      });

      wrapper.appendChild(entryDiv);
      wrapper.appendChild(resultDiv);
      container.appendChild(wrapper);
    }

    function calculateAll() {
      const entries = document.querySelectorAll("#entriesContainer > div");

      if (entries.length === 0) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£");
        return;
      }

      entries.forEach((wrapper, idx) => {
        const entry = wrapper.querySelector(".entry");
        const resultDiv = wrapper.querySelector(".result");
        resultDiv.innerHTML = ""; // ‡∏•‡πâ‡∏≤‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÄ‡∏Å‡πà‡∏≤‡∏Å‡πà‡∏≠‡∏ô

        const name = entry.querySelector(".item-name").value || `‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà ${idx + 1}`;
        const amount = parseFloat(entry.querySelector(".item-amount").value);
        const people = parseInt(entry.querySelector(".item-people").value);

        if (!amount || !people || amount <= 0 || people <= 0) {
          return;
        }

        const perPerson = (amount / people).toFixed(2);

        let html = `<strong>${name}</strong><br/>`;
        html += `‡∏£‡∏ß‡∏° ${amount} ‡∏ö‡∏≤‡∏ó / ${people} ‡∏Ñ‡∏ô = ‡∏Ñ‡∏ô‡∏•‡∏∞ ${perPerson} ‡∏ö‡∏≤‡∏ó<br/><br/>`;
        html += `<div class="person-list">`;

        for (let i = 1; i <= people; i++) {
          html += `
            <label>
              <input type="checkbox" /> ‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà ${i} ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß (${perPerson} ‡∏ö‡∏≤‡∏ó)
            </label><br/>
          `;
        }

        html += `</div>`;
        resultDiv.innerHTML = html;
      });
    }
  </script>

</body>
</html>
